# 内存架构
80386是32位的处理器，即可以寻址的物理内存地址空间为2\^32=4G字节。在理解面向80386处理器的操作系统的过程中，需要用到三个地址空间的概念：物理地址、逻辑地址和线性地址。地址是访问地址空间的索引。物理内存地址空间是处理器提交到总线上用于访问计算机系统中的内存和外设的最终地址。一个计算机系统中只有一个物理地址空间。线性地址空间是处理器控制下运行的应用程序可访问的地址空间。在操作系统的管理下，每个运行的应用程序都认为自己独享整个计算机系统的地址空间，这样可让多个运行的应用程序之间相互隔离，实现对地址空间的保护。处理器中的内存管理单元（MMU）通过段机制，在操作系统的帮助下，负责把线性地址转换成物理地址，这样就需要操作系统建立物理内存地址与线性内存地址的映射关系。

Intel可能觉得80386处理器有了段机制还不够，又加入了页机制，也是完成对内存单元的安全保护，隔离，且可以把应用程序看到的逻辑地址在处理器中的内存管理单元（MMU）的页机制控制下，转换成线性地址。在操作系统的管理与控制之下。在页机制和段机制上，其实有一定程度的功能重复，但为了向下兼容等目标，使得这两者一直共存。逻辑地址空间是应用程序直接使用的地址空间，比如如下C代码片段：
```
int boo=1;
int *foo=&a;
```
这里的boo是一个整型变量，foo变量是一个指向boo地址的整型指针变量，foo中储存的内容就是boo的逻辑地址。上述三种地址的关系如下：

 * 分段机制启动、分页机制未启动：逻辑地址-\>***段机制处理***-\>线性地址=物理地址

 * 分段机制和分页机制都启动：逻辑地址-\>***段机制处理***-\>线性地址-\>***页机制处理***-\>物理地址
